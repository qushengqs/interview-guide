- keys：列出所有满足规则对的key
  - 缺点
    - 没有offset、limit参数，一次性返回所有满足条件的key
    - 该算法是遍历算法，复杂度为O(n)，会导致redis服务器卡顿
- scan
  - 三个参数，第一次遍历时，cursor为0，然后将返回结果中的第一个整数值作为下一次遍历的cursor，一直遍历到返回的cursor值为0时结束，例如：scan 0 match key99* count 1000
    - cursor
    - key的正则表达式
    - 遍历的limit hint，不是限制返回结果的数量，而是限制服务器单次遍历的字典槽位数量(约等于)
  - 特点
    - 复杂度也是O(n)，但是通过游标分步进行的，不会阻塞线程
    - 提供limit参数，可以控制每次返回结果的最大条数，该参数只是一个hint，返回的结果可多可少
    - 也提供模式匹配功能
    - 服务器不保存游标状态，游标的唯一状态scan返回给客户端的游标整数
    - 返回的结果可能重复，需要客户端去重
    - 遍历过程中修改数据，改动后的数据能不能遍历到是不确定的
    - 每次返回的结果为空并不意味遍历结束，要看返回的游标值是否为零
- 字典结构
  - redis中所有的key都存储在一个很大的字典中，和Java中的HashMap一样，是一维数组 + 二维链表
  - 一维数组大小总是2^n，扩容一次数组大小空间加倍
  - scan指令
    - 返回的游标是一维数组的位置索引，称为槽(slot)
    - limit参数表示需要遍历的槽位数
    - 返回的结果不一致，是因为槽位上挂接的链表，有些链表为空，有些有多个元素
    - 每次遍历会将槽位上挂接的链表元素模式匹配后，一次性返回给客户端
- 遍历顺序
  - 采用高位进位加法来遍历，主要是考虑字典的扩容和缩容时避免槽位的遍历重复和遗漏
  - 高位进位：从左边加，进位往右边移动
- 更多的scan指令
  - zscan：遍历zset集合元素
  - hscan：遍历hash字典元素
  - sscan：遍历set集合元素